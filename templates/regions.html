{% extends "base.html" %}

{% block title %}Regions - Philippine Zipcodes{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8" id="regions-page">
    <div class="text-center mx-auto">
        <h2
            class="text-xl sm:text-2xl lg:text-3xl font-medium mb-4">
            Philippine Regions
        </h2>
        <p class="max-w-2xl mx-auto font-light text-lg mb-4">
            Explore the diverse regions of the Philippines, from Luzon to
            Mindanao
        </p>
    </div>
    <div class="relative max-w-xl mx-auto" id="search-container">
        <div
            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
            id="search-icon">
            <img src="/static/icons/magnifying-glass-light.svg"
                class="h-5 w-5 opacity-50" alt="Search" />
        </div>
        <input name="q" placeholder="Enter region name..."
            class="w-full pl-10 pr-16 py-3 text-lg rounded-2xl border shadow-lg focus:outline-none focus:ring-4 ring-gray-300"
            hx-get="/regions/search"
            hx-trigger="keyup changed delay:300ms"
            hx-target="#regions-grid"
            hx-include="[name='region']">
        <button
            class="absolute inset-y-0 right-0 pr-4 flex items-center cursor-pointer"
            onclick="clearSearch(this)">
            <img src="/static/icons/backspace-light.svg"
                class="h-5 w-5 opacity-50" alt="Clear" />
        </button>
    </div>
    <!-- Regions Grid -->
    <div id="regions-grid" class="mt-4">
        {% include "components/regions_grid.html" %}
    </div>
</div>

<script>
    function clearSearch(button) {
        const input = button.parentElement.querySelector('input');
        input.value = '';
        htmx.trigger(input, 'keyup');
    }
</script>
{% endblock %}